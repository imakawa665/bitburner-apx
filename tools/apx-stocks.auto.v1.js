export async function main(ns){ ns.disableLog('sleep'); const F=ns.flags([['budget',0.40],['minCash',1e9],['interval',15000]]); const reserve=()=>{ try{ return Math.max(0, Number(ns.read('reserve.txt')||0)); }catch{return 0;} }; const cash=()=> Math.max(0, ns.getServerMoneyAvailable('home') - reserve()); function ensure(){ if(!ns.stock) return false; let c=false; try{ if(!ns.stock.hasWSEAccount() && cash()>=200000){ ns.stock.purchaseWseAccount(); c=true; } if(!ns.stock.hasTIXAPIAccess() && cash()>=5000000){ ns.stock.purchaseTixApi(); c=true; } }catch{} return c; } ensure(); if(!ns.stock?.hasTIXAPIAccess?.()) return; ns.run('tools/apx-stocks.momentum.v1.js',1,'--budget',F.budget,'--minCash',F.minCash); }